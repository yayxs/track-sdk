## 前端监控

- 数据监控

## 埋点概述

- 代码埋点：埋点位置打点；代码版本难以管理；数据可靠
- 埋点 SDK:简单易用；多端一致性

## 功能设计

### 功能点

- `PV`
- `UV`
- 重要操作（点击事件的频率）
- 页面的热力图效果
- 用户环境参数（设备参数、时间参数、地区参数）

### 实现点

- 页面加载完成自动上报 `PV` `UV`
- 手动上报埋点
- 上报默认携带`预设参数信息`
- 支持用户自定义埋点参数
- 点击`dom` 点击事件

### 产出

- `vue` 项目的 web 项目中的`main.js` 中

```javascript
import TrackSdk from './track'
const tracker = new TrackSdk({})
```

- 自定义埋点上报：针对特定场景

  ```javascript
  // 设置用户标识，在用户登录后使用
  tracker.setUserId('12312121212')

  // 埋点发送方法，3个参数分别是：事件类型，事件标识，上报数据
  const data = {
    name: 'tester',
    payload: {
      info: '',
    },
  }
  tracker.sendTracker('click', 'xxx', data)
  ```

## 方案设计

### `PV`

`PV`（page view，页面浏览量）:用户每打开 1 个网站页面，记录 1 个 PV。用户多次打开同一页面，PV 值累计多次。主要用来衡量网站用户访问的网页数量。是评价网站流量最常用的指标之一。

### UV

**UV**（ unique visitor，网站独立访客）:通过互联网访问、流量网站的自然人。1 天内相同访客多次访问网站，只计算为 1 个独立访客。该概念的引入，是从用户个体的角度对访问数据进行划分。

## 问题

- 怎么标识用户？用户的 id userId
- 发送的策略？
  - 时间间隔：每隔一段时间
  - 存储的条数：存储数据达到一定的条数
  - 应用进入后台（app、小程序）
- 数据发送失败了？

  - 将发送的数据缓存起来
  - 条件 ok 一起发

- 事件模型格式
- 数据怎么存储
